(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(80),a(67)),l=a(147),u=a(146),s=a(19),m=a(142),f=a(108),p=a(133),d=a(134),g=a(135),h=a(136),b=a(140),E=a(139),v=a(148),w=a(145),O=r.a.createContext({authenticated:!1,user:{}}),j=a(39),y=a.n(j),I=(a(81),a(60),a(104),{apiKey:"AIzaSyCNrWqbvDNEp53wNfDtDMqfZbgStsJEM-E",authDomain:"paiweb.firebaseapp.com",databaseURL:"https://paiweb.firebaseio.com",projectId:"paiweb",storageBucket:"paiweb.appspot.com",messagingSenderId:"560094021764",appId:"1:560094021764:web:d9efaf85f4747eb1"}),x={apiKey:I.apiKey,authDomain:I.authDomain,databaseURL:I.databaseUrl,projectId:I.projectId,storageBucket:I.storageBucket,messagingSenderId:I.mesagingSenderId,appId:I.appId};y.a.initializeApp(x);var D=y.a,C=y.a.firestore(),k=Object(f.a)({root:{},grow:{flexGrow:1},avatar:{margin:0,padding:0,height:"24px",width:"24px"}})(function(e){var t=e.classes,a=r.a.useState(null),o=Object(s.a)(a,2),c=o[0],i=o[1],l=Boolean(c),u=Object(n.useContext)(O);return r.a.createElement("div",{className:t.root},r.a.createElement(p.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(g.a,{variant:"h6",color:"inherit",className:t.grow},"Pai"),r.a.createElement(h.a,{color:"inherit",onClick:function(e){u.authenticated&&i(e.currentTarget)}},u.authenticated?r.a.createElement(E.a,{alt:"Remy Sharp",src:u.user.photoURL,className:t.avatar}):r.a.createElement(b.a,null,"account_circle")),r.a.createElement(w.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){i(null)}},r.a.createElement(v.a,{onClick:function(){i(null),D.auth().signOut(),e.setAuthContext({})}},"Sign out")))))}),R=Object(f.a)(function(e){return{appBar:{top:"auto",bottom:0},toolbar:{alignItems:"center",justifyContent:"space-between"}}})(function(e){var t=e.classes;return r.a.createElement(p.a,{position:"fixed",color:"primary",className:t.appBar},r.a.createElement(d.a,{className:t.toolbar},r.a.createElement(h.a,{color:"inherit","aria-label":"Open drawer",onClick:e.toggleDrawer(!0)},r.a.createElement(b.a,null,"menu")),e.camera,r.a.createElement("div",null,r.a.createElement(h.a,{color:"inherit"},r.a.createElement(b.a,null,"more_vert")))))}),S=a(49),N=a.n(S),A=a(65),B=function(e,t){var a="images/"+t+"/"+function(e){return Date.now()+e.name.substr(e.name.lastIndexOf("."))}(e);D.storage().ref(a).put(e).on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("percentage",t)},function(e){},function(){console.log("DONE!"),U(a,t)})},U=function(e,t){C.collection("posts").add({uid:t,imgRef:e,text:"",timestamp:D.firestore.FieldValue.serverTimestamp()}).then(function(e){console.log("Document written with docRef: ",e)}).catch(function(e){console.error("Error adding document: ",e)})},L=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)(function(){return i(e.imageRef)},[e.imageRef]);var i=function(e){(function(e){if(e)return D.storage().ref(e).getDownloadURL().then(function(e){return e})})(e).then(function(e){return c(e)})};return r.a.createElement(N.a,{styles:"image-orientation: from-image",width:"100%",height:"auto",src:o,alt:"image post"})},P=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],i=function(){C.collection("posts").orderBy("timestamp","desc").limit(3).get().then(function(e){var t=[];return e.forEach(function(e){t.push(e.data())}),t}).then(function(e){return c(e)})};Object(n.useEffect)(function(){return i()},[]);return r.a.createElement("div",null,r.a.createElement(N.a,{styles:"image-orientation: from-image",width:"100%",height:"auto",src:e.imagePreviewUrl,alt:"preview"}),o.map(function(e,t){return r.a.createElement(L,{key:"FeedImage"+t,imageRef:e.imgRef})}))},z=a(144),F=Object(m.a)({drawerList:{width:"250px"}}),_=function(e){var t=e.open,a=e.toggleDrawer,n=F();return r.a.createElement(z.a,{open:t,onClose:a(!1),onOpen:a(!0)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:a(!1),onKeyDown:a(!1)},r.a.createElement("div",{className:n.drawerList},"SideDrawer")))},K=a(141),W=Object(f.a)(function(e){return{fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"},hide:{display:"none"}}})(function(e){var t=e.classes,a=Object(n.createRef)();return r.a.createElement("div",null,r.a.createElement("span",{className:t.hide},r.a.createElement("input",{type:"file",accept:"image/*",capture:!0,onChange:function(t){return e.handleFile(t)},ref:a})),r.a.createElement(K.a,{color:"secondary","aria-label":"Add",className:t.fabButton,onClick:function(){return a.current.click()}},r.a.createElement(b.a,null,"photo_camera")))}),q=a(66),J=a.n(q),T=function(e){var t={signInFlow:"popup",signInOptions:[D.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};return Object(n.useEffect)(function(){var t=D.auth().onAuthStateChanged(function(t){e.setAuthContext({authenticated:!!t,user:t})});return function(){t()}},[]),r.a.createElement("div",null,r.a.createElement(J.a,{uiConfig:t,firebaseAuth:D.auth()}))},V=Object(m.a)(function(e){return{App:{height:"100vh",display:"flex",flexDirection:"column"}}}),G=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),l=Object(s.a)(i,2),u=l[0],m=l[1],f=Object(n.useState)({}),p=Object(s.a)(f,2),d=p[0],g=p[1],h=V(),b=function(e){g(e)},E=function(e){return function(){c(e)}};return r.a.createElement("div",{className:h.App},r.a.createElement(O.Provider,{value:d},r.a.createElement(k,{setAuthContext:b}),r.a.createElement(_,{open:o,toggleDrawer:E}),d.authenticated?r.a.createElement(P,{imagePreviewUrl:u}):r.a.createElement(T,{setAuthContext:b}),r.a.createElement(R,{toggleDrawer:E,camera:r.a.createElement(W,{handleFile:function(e){var t=e.target.files[0];!t&&d.authenticated||function(e,t){e&&new A.a(e,{quality:.6,success:function(e){t(e)},error:function(e){console.log(e.message)}})}(t,function(e){m(URL.createObjectURL(e)),B(e,d.user.uid)})}})})))},M=Object(i.a)({palette:{primary:{main:"#ec407a",light:"#ff77a9",dark:"#b4004e"},secondary:{main:"#42a5f5",light:"#80d6ff",dark:"#0077c2"}},typography:{useNextVariants:!0}});var Z=function(e){return r.a.createElement(l.a,{theme:M},r.a.createElement(u.a,null),r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,a){e.exports=a(103)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.a3e2ce83.chunk.js.map